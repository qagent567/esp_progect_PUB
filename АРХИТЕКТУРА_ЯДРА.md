# üèóÔ∏è AgriSwarm: –†–µ–∞–ª—å–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º—ã

*–ß–µ—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑—É—á–µ–Ω–∏—è 27,000+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞*

## üìä –ß—Ç–æ –≠—Ç–æ –ù–∞ –°–∞–º–æ–º –î–µ–ª–µ

**AgriSwarm v0.3.7-bu** - —ç—Ç–æ **"–ú–æ–¥—É–ª—å–Ω—ã–π –ú–æ–Ω–æ–ª–∏—Ç —Å –≠–ª–µ–º–µ–Ω—Ç–∞–º–∏ –ú–∏–∫—Ä–æ—è–¥—Ä–∞"** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≥–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è embedded —Å–∏—Å—Ç–µ–º.

**üèóÔ∏è –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:** Manager Pattern Architecture —Å 35 –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è ESP32.

**üö® –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:** –≠—Ç–æ –ù–ï —Å—Ç—Ä–æ–≥–∞—è –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∞ —Å–∫–æ—Ä–µ–µ **–Ω–∞–±–æ—Ä –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** —Å–æ —Å–≤–æ–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏.

### üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

| –¢–∏–ø –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã | –î–æ–ª—è | –ü—Ä–∏–∑–Ω–∞–∫–∏ –≤ –ö–æ–¥–µ | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ |
|-----------------|------|------------------|--------------|-------------|
| **–ú–æ–Ω–æ–ª–∏—Ç** | 70% | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –µ–¥–∏–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å | –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –ø—Ä–æ—Å—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞ | –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ—Ç–∫–∞–∑–∞, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| **–ú–∏–∫—Ä–æ—è–¥—Ä–æ** | 20% | Singleton –ø–∞—Ç—Ç–µ—Ä–Ω—ã, dependency injection | –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, —á–µ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã | –°–ª–æ–∂–Ω–æ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏, overhead |
| **–ì–∏–±—Ä–∏–¥** | 10% | –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, watchdogs | –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ—Å—Ç–æ—Ç–æ–π –∏ –≥–∏–±–∫–æ—Å—Ç—å—é | –ö–æ–º–ø—Ä–æ–º–∏—Å—Å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è |

### üèóÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ –¢–∏–ø–∞–º

#### **‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –ú–µ–Ω–µ–¥–∂–µ—Ä—ã (8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|----------------|------------|-------------|
| **ConfigManager** | –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | 655 | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è |
| **NetworkManager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ mesh-—Å–µ—Ç—å—é –∏ WiFi | 948 | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è |
| **PinManager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPIO –∏ –¥–∞—Ç—á–∏–∫–∞–º–∏ | 1635 | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è |
| **RuleEngine** | –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ IF-THEN | 518 | –í—ã—Å–æ–∫–∞—è |
| **TaskScheduler** | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á –ø–æ –≤—Ä–µ–º–µ–Ω–∏ | 192 | –°—Ä–µ–¥–Ω—è—è |
| **NodeManager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞–º–∏ —Å–µ—Ç–∏ | 244 | –°—Ä–µ–¥–Ω—è—è |
| **MessageQueueManager** | –û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ | 231 | –°—Ä–µ–¥–Ω—è—è |
| **AlgorithmScheduler** | –°–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ ML | 759 | –ù–∏–∑–∫–∞—è |

#### **üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –°–∏—Å—Ç–µ–º—ã (8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------------|------------|------------|
| **SystemMonitor** | Watchdog, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ | 274 | –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–Ω–∏–π |
| **MeshReliabilityManager** | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å mesh-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π | 642 | –ë–æ—Ä—å–±–∞ —Å–æ —Å–±–æ—è–º–∏ —Å–µ—Ç–∏ |
| **MeshPerformanceMonitor** | –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | 244 | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏ |
| **ConnectionLossDetector** | –î–µ—Ç–µ–∫—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π —É–∑–ª–æ–≤ | 690 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π |
| **MeshStatisticsManager** | –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ç–∏ | 1052 | –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞ |
| **PingManager** | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–µ—Ä–∂–µ–∫ | 762 | –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ —Å–≤—è–∑–∏ |
| **SelfReflectionSystem** | –°–∞–º–æ–∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã | 414 | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
| **SensorConnectionMonitor** | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞—Ç—á–∏–∫–æ–≤ | 828 | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–±–æ–µ–≤ |

#### **üõ°Ô∏è –ó–∞—â–∏—Ç–Ω—ã–µ –ú–µ—Ö–∞–Ω–∏–∑–º—ã (4 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –ó–∞—â–∏—Ç–∞ –æ—Ç |
|-----------|----------------|------------|-----------|
| **SafeMemory** | –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é | 211 | –£—Ç–µ—á–µ–∫ –∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–π |
| **SafeMath** | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ | 89 | –î–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å |
| **SafeCommandParser** | –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ | 85 | Buffer overflow |
| **SystemMonitor** | Watchdog —Ç–∞–π–º–µ—Ä | 274 | –ó–∞–≤–∏—Å–∞–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã |

#### **üí¨ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (3 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª |
|-----------|----------------|------------|------------|
| **CommandExecutor** | CLI —Å 131 –∫–æ–º–∞–Ω–¥–æ–π | 6286 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π |
| **InteractiveHelper** | –ú–∞—Å—Ç–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | 886 | –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |
| **Logger** | –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | 61 | –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |

#### **üìä –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –°–∏—Å—Ç–µ–º—ã (12 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------------|------------|------------|
| **AutoConnectionManager** | –ê–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ | 88 | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∏ |
| **SensorPublisher** | –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ | 860 | MQTT-like —Ç–æ–ø–∏–∫–∏ |
| **ActuatorPublisher** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç—É–∞—Ç–æ—Ä–∞–º–∏ | 604 | –ö–æ–º–∞–Ω–¥—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º |
| **HostManager** | –†–µ–∂–∏–º —Ö–æ—Å—Ç–∞ —Å–µ—Ç–∏ | 250 | –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ |
| **TrustedNodeManager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ | 503 | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ç–∏ |
| **NotificationSystem** | –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | 484 | –ê–ª–µ—Ä—Ç—ã –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è |
| **LogPauseManager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—É–∑–∞–º–∏ –ª–æ–≥–æ–≤ | 133 | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–≤–æ–¥–∞ |
| **Scheduler** | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á | 192 | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é |
| **MessageRouter** | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π | 146 | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ |
| **MessageBuffer** | –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π | 101 | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ |
| **PinCommandHelper** | –ü–æ–º–æ—â–Ω–∏–∫ –∫–æ–º–∞–Ω–¥ GPIO | 475 | –£–ø—Ä–æ—â–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| **SystemDiagnostics** | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã | 269 | –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ |

```mermaid
graph TD
    subgraph "üéÆ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ô –ò–ù–¢–ï–†–§–ï–ô–°"
        CLI["üí¨ CommandExecutor<br/>6286 —Å—Ç—Ä–æ–∫, 131 –∫–æ–º–∞–Ω–¥–∞<br/>‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br/>‚Ä¢ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –∏—Å—Ç–æ—Ä–∏—è<br/>‚Ä¢ –ú–∞—Å—Ç–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"]
        WIZARD["üßô‚Äç‚ôÇÔ∏è InteractiveHelper<br/>886 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ –ú–∞—Å—Ç–µ—Ä first_run<br/>‚Ä¢ –ú–∞—Å—Ç–µ—Ä sensor_setup<br/>‚Ä¢ –ú–∞—Å—Ç–µ—Ä automation_setup"]
        LOGGER["üìù Logger<br/>61 —Å—Ç—Ä–æ–∫–∞<br/>‚Ä¢ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è<br/>‚Ä¢ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π<br/>‚Ä¢ –£—Ä–æ–≤–Ω–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏"]
    end

    subgraph "‚öôÔ∏è –û–°–ù–û–í–ù–´–ï –ú–ï–ù–ï–î–ñ–ï–†–´"
        CONFIG["üìÅ ConfigManager<br/>655 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è<br/>‚Ä¢ LittleFS —Ñ–∞–π–ª—ã<br/>‚Ä¢ WiFi –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"]
        NETWORK["üåê NetworkManager<br/>948 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ painlessMesh —Å–µ—Ç—å<br/>‚Ä¢ WiFi STA/AP —Ä–µ–∂–∏–º<br/>‚Ä¢ Message routing"]
        PINS["üîå PinManager<br/>1635 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ GPIO —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ<br/>‚Ä¢ DHT22/DHT11 –¥–∞—Ç—á–∏–∫–∏<br/>‚Ä¢ –†–µ–ª–µ –∏ –∞–∫—Ç—É–∞—Ç–æ—Ä—ã"]
        RULES["‚ö° RuleEngine<br/>518 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ IF-THEN –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è<br/>‚Ä¢ –ü—Ä–∞–≤–∏–ª–∞ —Å –∫—É–ª–¥–∞—É–Ω–∞–º–∏<br/>‚Ä¢ Callback –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è"]
        TASKS["üìÖ TaskScheduler<br/>192 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á<br/>‚Ä¢ –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã<br/>‚Ä¢ –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –∑–∞–¥–∞—á–∏"]
        NODES["üè† NodeManager<br/>244 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞–º–∏<br/>‚Ä¢ –°—Ç–∞—Ç—É—Å—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è<br/>‚Ä¢ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É–∑–ª–∞—Ö"]
        MESSAGES["üì¨ MessageQueueManager<br/>231 —Å—Ç—Ä–æ–∫–∞<br/>‚Ä¢ –û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π<br/>‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏<br/>‚Ä¢ –ù–∞–¥–µ–∂–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞"]
        ALGOS["ü§ñ AlgorithmScheduler<br/>759 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ –°–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã<br/>‚Ä¢ –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ<br/>‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö"]
    end

    subgraph "üì§ –ü–£–ë–õ–ò–ö–ê–¢–û–†–´ –î–ê–ù–ù–´–•"
        SENSOR_PUB["üìä SensorPublisher<br/>860 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤<br/>‚Ä¢ MQTT-–ø–æ–¥–æ–±–Ω—ã–µ —Ç–æ–ø–∏–∫–∏<br/>‚Ä¢ –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏"]
        ACTUATOR_PUB["üîß ActuatorPublisher<br/>604 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç—É–∞—Ç–æ—Ä–∞–º–∏<br/>‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ–ª–µ<br/>‚Ä¢ –ö–æ–º–∞–Ω–¥—ã —É–¥–∞–ª–µ–Ω–Ω—ã–º —É–∑–ª–∞–º"]
    end

    subgraph "üîç –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –°–ò–°–¢–ï–ú–´"
        SYSTEM_MON["üõ°Ô∏è SystemMonitor<br/>274 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ Watchdog —Ç–∞–π–º–µ—Ä<br/>‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏<br/>‚Ä¢ –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π"]
        MESH_RELIAB["üîß MeshReliabilityManager<br/>642 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å mesh-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π<br/>‚Ä¢ Ping —Ü–∏–∫–ª—ã<br/>‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π"]
        MESH_PERF["üìà MeshPerformanceMonitor<br/>244 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏<br/>‚Ä¢ –ê–Ω–∞–ª–∏–∑ –∑–∞–¥–µ—Ä–∂–µ–∫<br/>‚Ä¢ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏"]
        CONN_DETECT["üö® ConnectionLossDetector<br/>690 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ 5 —Å–æ—Å—Ç–æ—è–Ω–∏–π —É–∑–ª–æ–≤<br/>‚Ä¢ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã<br/>‚Ä¢ –¢—Ä–µ–Ω–¥-–∞–Ω–∞–ª–∏–∑ —Å–±–æ–µ–≤"]
        MESH_STATS["üìä MeshStatisticsManager<br/>1052 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ç–∏<br/>‚Ä¢ –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞<br/>‚Ä¢ –û—Ç—á–µ—Ç—ã –æ —Ä–∞–±–æ—Ç–µ"]
        PING_MGR["üèì PingManager<br/>762 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–µ—Ä–∂–µ–∫<br/>‚Ä¢ Windows-style ping<br/>‚Ä¢ –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–≤—è–∑–∏"]
        SELF_REFLECT["üß† SelfReflectionSystem<br/>414 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ –°–∞–º–æ–∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã<br/>‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è<br/>‚Ä¢ –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è"]
        SENSOR_CONN["üì° SensorConnectionMonitor<br/>828 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤<br/>‚Ä¢ –î–µ—Ç–µ–∫—Ü–∏—è "—É–º–∏—Ä–∞—é—â–∏—Ö" —Å–µ–Ω—Å–æ—Ä–æ–≤<br/>‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π"]
    end

    subgraph "üõ°Ô∏è –ó–ê–©–ò–¢–ù–´–ï –ú–ï–•–ê–ù–ò–ó–ú–´"
        SAFE_MEM["üíæ SafeMemory<br/>211 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ free heap<br/>‚Ä¢ –ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–µ–∫<br/>‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è —É–∫–∞–∑–∞—Ç–µ–ª–µ–π"]
        SAFE_MATH["üî¢ SafeMath<br/>89 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ 0<br/>‚Ä¢ Overflow –ø—Ä–æ–≤–µ—Ä–∫–∏<br/>‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏"]
        SAFE_CMD["üîê SafeCommandParser<br/>85 —Å—Ç—Ä–æ–∫<br/>‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞<br/>‚Ä¢ –ó–∞—â–∏—Ç–∞ –æ—Ç buffer overflow<br/>‚Ä¢ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥"]
        WATCHDOG["‚è∞ SystemMonitor<br/>274 —Å—Ç—Ä–æ–∫–∏<br/>‚Ä¢ Watchdog –∫–∞–∂–¥—ã–π —Ü–∏–∫–ª<br/>‚Ä¢ –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π ESP32<br/>‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏"]
    end

    subgraph "üíæ –°–ò–°–¢–ï–ú–ê –•–†–ê–ù–ï–ù–ò–Ø"
        LITTLEFS["üìÅ LittleFS<br/>‚Ä¢ /config.json<br/>‚Ä¢ /pins<br/>‚Ä¢ /rules.json<br/>‚Ä¢ /tasks.json<br/>‚Ä¢ /wifi_config.json"]
        SPIFFS["üìÑ SPIFFS<br/>‚Ä¢ –õ–æ–≥–∏<br/>‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã<br/>‚Ä¢ –ö—ç—à –¥–∞–Ω–Ω—ã—Ö"]
        EEPROM["üîß EEPROM<br/>‚Ä¢ –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>‚Ä¢ WiFi –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è<br/>‚Ä¢ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∏"]
    end

    subgraph "üîå –ñ–ï–õ–ï–ó–û ESP32"
        ESP32["üíª ESP32<br/>‚Ä¢ 520KB RAM<br/>‚Ä¢ 4MB Flash<br/>‚Ä¢ WiFi 2.4GHz<br/>‚Ä¢ GPIO –ø–∏–Ω—ã<br/>‚Ä¢ UART Serial"]
        GPIO["üîå GPIO<br/>‚Ä¢ –î–∞—Ç—á–∏–∫–∏ DHT22/DHT11<br/>‚Ä¢ –ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ –≤—Ö–æ–¥—ã<br/>‚Ä¢ –¶–∏—Ñ—Ä–æ–≤—ã–µ –≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã<br/>‚Ä¢ –†–µ–ª–µ –º–æ–¥—É–ª–∏"]
        WIFI["üì° WiFi<br/>‚Ä¢ 2.4GHz b/g/n<br/>‚Ä¢ STA/AP —Ä–µ–∂–∏–º—ã<br/>‚Ä¢ painlessMesh –ø—Ä–æ—Ç–æ–∫–æ–ª<br/>‚Ä¢ –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"]
    end

    %% –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ô –ò–ù–¢–ï–†–§–ï–ô–°
    CLI --> WIZARD
    CLI --> LOGGER
    WIZARD --> CLI

    %% –û–°–ù–û–í–ù–´–ï –ú–ï–ù–ï–î–ñ–ï–†–´
    CONFIG --> LITTLEFS
    NETWORK --> WIFI
    PINS --> GPIO
    RULES --> PINS
    TASKS --> CLI
    NODES --> NETWORK
    MESSAGES --> NETWORK
    ALGOS --> PINS

    %% –ü–£–ë–õ–ò–ö–ê–¢–û–†–´ –î–ê–ù–ù–´–•
    PINS --> SENSOR_PUB
    PINS --> ACTUATOR_PUB
    SENSOR_PUB --> NETWORK
    ACTUATOR_PUB --> NETWORK

    %% –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –°–ò–°–¢–ï–ú–´
    SYSTEM_MON --> ESP32
    MESH_RELIAB --> NETWORK
    MESH_PERF --> NETWORK
    CONN_DETECT --> NETWORK
    MESH_STATS --> NETWORK
    PING_MGR --> NETWORK
    SELF_REFLECT --> NETWORK
    SENSOR_CONN --> PINS

    %% –ó–ê–©–ò–¢–ù–´–ï –ú–ï–•–ê–ù–ò–ó–ú–´
    CLI --> SAFE_CMD
    PINS --> SAFE_MEM
    RULES --> SAFE_MATH
    SYSTEM_MON --> WATCHDOG

    %% –•–†–ê–ù–ï–ù–ò–ï
    CONFIG --> LITTLEFS
    LOGGER --> SPIFFS
    CONFIG --> EEPROM

    %% –ñ–ï–õ–ï–ó–û
    PINS --> GPIO
    NETWORK --> WIFI
    SYSTEM_MON --> ESP32
    CONFIG --> ESP32

    %% –°–¢–ò–õ–ò –ü–û –í–ê–ñ–ù–û–°–¢–ò
    style CLI fill:#96ceb4,stroke:#fff,stroke-width:3px
    style PINS fill:#feca57,stroke:#fff,stroke-width:3px
    style NETWORK fill:#45b7d1,stroke:#fff,stroke-width:3px
    style SYSTEM_MON fill:#ff6b6b,stroke:#fff,stroke-width:3px
    style ESP32 fill:#e8f5e8,stroke:#388e3c,stroke-width:3px
    style CONFIG fill:#dda0dd,stroke:#fff,stroke-width:2px
    style SAFE_MEM fill:#98fb98,stroke:#fff,stroke-width:2px
```

---

## üéØ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ò—Ö –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å

### **üèóÔ∏è –î–µ—Ç–∞–ª—å–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ì—Ä—É–ø–ø–∞–º**

#### **‚öôÔ∏è –Ø–¥—Ä–æ –°–∏—Å—Ç–µ–º—ã (Core Components)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—Ä –∏–∑ –∫–æ–¥–∞ |
|-----------|------|--------|----------------|----------------|
| **ConfigManager** | ConfigManager.cpp | 655 | –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ LittleFS | `config.loadFromFile()`, `config.saveToFile()` |
| **SystemMonitor** | SystemMonitor.cpp | 274 | Watchdog —Ç–∞–π–º–µ—Ä, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏, –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π | `SystemMonitor::getInstance().feedWatchdog()` |
| **TaskScheduler** | Scheduler.cpp | 192 | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å callback'–∞–º–∏ | `taskScheduler.addTask()`, `taskScheduler.update()` |
| **Logger** | Logger.cpp | 61 | –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å —É—Ä–æ–≤–Ω—è–º–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏ | `Logger::getInstance().info()`, `Logger::getInstance().error()` |

#### **üåê –°–µ—Ç–µ–≤–∞—è –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ (Network Layer)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—Ä –∏–∑ –∫–æ–¥–∞ |
|-----------|------|--------|----------------|----------------|
| **NetworkManager** | NetworkManager.cpp | 948 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WiFi –∏ painlessMesh —Å–µ—Ç—å—é | `networkManager.handleClient()`, `networkManager.sendMessage()` |
| **NodeManager** | NodeManager.cpp | 244 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞–º–∏ —Å–µ—Ç–∏ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–∞–º–∏ | `nodeManager.getNodeInfo()`, `nodeManager.updateNodeStatus()` |
| **PingManager** | PingManager.cpp | 762 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–≤—è–∑–∏ | `PingManager::getInstance().getPingStats()` |
| **AutoConnectionManager** | AutoConnectionManager.cpp | 88 | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö | `autoConnectionManager.update()` |
| **HostManager** | HostManager.cpp | 250 | –†–µ–∂–∏–º —Ö–æ—Å—Ç–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ | `hostManager.start()`, `hostManager.stop()` |

#### **üîå –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ (Hardware Layer)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—Ä –∏–∑ –∫–æ–¥–∞ |
|-----------|------|--------|----------------|----------------|
| **PinManager** | PinManager.cpp | 1635 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPIO, –¥–∞—Ç—á–∏–∫–∞–º–∏ DHT, —Ä–µ–ª–µ | `pinManager.setupPin()`, `pinManager.updateSensors()` |
| **SensorPublisher** | SensorPublisher.cpp | 860 | –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –≤ —Å–µ—Ç—å | `sensorPublisher.publish()`, `sensorPublisher.handleData()` |
| **ActuatorPublisher** | ActuatorPublisher.cpp | 604 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç—É–∞—Ç–æ—Ä–∞–º–∏ –∏ —Ä–µ–ª–µ | `actuatorPublisher.setState()`, `actuatorPublisher.update()` |
| **SensorMonitor** | SensorMonitor.cpp | 519 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤ | `sensorMonitor.update()`, `sensorMonitor.getStatus()` |
| **SensorConnectionMonitor** | SensorConnectionMonitor.cpp | 828 | –î–µ—Ç–µ–∫—Ü–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–±–æ–µ–≤ –¥–∞—Ç—á–∏–∫–æ–≤ | `SensorConnectionMonitor::getInstance().update()` |

#### **‚ö° –°–∏—Å—Ç–µ–º–∞ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (Automation Layer)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|------|--------|----------------|-------------|
| **RuleEngine** | RuleEngine.cpp | 518 | –õ–æ–≥–∏–∫–∞ IF-THEN –ø—Ä–∞–≤–∏–ª —Å –∫—É–ª–¥–∞—É–Ω–∞–º–∏ | –í—ã—Å–æ–∫–∞—è |
| **AlgorithmScheduler** | AlgorithmScheduler.cpp | 759 | –°–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ | –ù–∏–∑–∫–∞—è |
| **MessageQueueManager** | MessageQueueManager.cpp | 231 | –û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ | –°—Ä–µ–¥–Ω—è—è |
| **MessageRouter** | MessageRouter.cpp | 146 | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π | –°—Ä–µ–¥–Ω—è—è |

#### **üíª –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (User Interface)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|------|--------|----------------|-------------|
| **CommandExecutor** | CommandExecutor.cpp | 6286 | CLI —Å 131 –∫–æ–º–∞–Ω–¥–æ–π –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ | –í—ã—Å–æ–∫–∞—è |
| **InteractiveHelper** | InteractiveHelper.cpp | 886 | –ú–∞—Å—Ç–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–º–æ—â–Ω–∏–∫–∏ | –°—Ä–µ–¥–Ω—è—è |
| **PinCommandHelper** | PinCommandHelper.cpp | 475 | –ü–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥ GPIO –∏ –¥–∞—Ç—á–∏–∫–æ–≤ | –°—Ä–µ–¥–Ω—è—è |
| **SafeCommandParser** | SafeCommandParser.cpp | 85 | –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ | –°—Ä–µ–¥–Ω—è—è |

#### **üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –°–∏—Å—Ç–µ–º—ã (Diagnostic Systems)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|------|--------|----------------|-------------|
| **SystemDiagnostics** | SystemDiagnostics.cpp | 269 | –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º | –°—Ä–µ–¥–Ω—è—è |
| **MeshReliabilityManager** | MeshReliabilityManager.cpp | 642 | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å mesh-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ | –°—Ä–µ–¥–Ω—è—è |
| **MeshPerformanceMonitor** | MeshPerformanceMonitor.cpp | 244 | –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏ | –°—Ä–µ–¥–Ω—è—è |
| **ConnectionLossDetector** | ConnectionLossDetector.cpp | 690 | –î–µ—Ç–µ–∫—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π —É–∑–ª–æ–≤ (5 —Å–æ—Å—Ç–æ—è–Ω–∏–π) | –°—Ä–µ–¥–Ω—è—è |
| **MeshStatisticsManager** | MeshStatisticsManager.cpp | 1052 | –°–±–æ—Ä –∏ –∞–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ç–∏ | –°—Ä–µ–¥–Ω—è—è |
| **SelfReflectionSystem** | SelfReflectionSystem.cpp | 414 | –°–∞–º–æ–∞–Ω–∞–ª–∏–∑ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –ù–∏–∑–∫–∞—è |
| **LogPauseManager** | LogPauseManager.cpp | 133 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—É–∑–∞–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | –ù–∏–∑–∫–∞—è |

#### **üõ°Ô∏è –°–∏—Å—Ç–µ–º—ã –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Security Systems)**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|------|--------|----------------|-------------|
| **TrustedNodeManager** | TrustedNodeManager.cpp | 503 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ —Å–µ—Ç–∏ | –°—Ä–µ–¥–Ω—è—è |
| **NotificationSystem** | NotificationSystem.cpp | 484 | –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –∞–ª–µ—Ä—Ç—ã | –°—Ä–µ–¥–Ω—è—è |
| **SafeMemory** | SafeMemory.h | 211 | –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é | –í—ã—Å–æ–∫–∞—è |
| **SafeMath** | SafeMath.h | 89 | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ | –í—ã—Å–æ–∫–∞—è |

---

## üîÑ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

*–ò–∑ main.cpp, —Å—Ç—Ä–æ–∫–∏ 175-280:*

```mermaid
graph TD
    START([–ó–∞–ø—É—Å–∫ ESP32]) --> SERIAL[Serial.begin 115200]
    SERIAL --> LED[–ù–∞—Å—Ç—Ä–æ–π–∫–∞ LED —Å—Ç–∞—Ç—É—Å–∞]
    LED --> LOGS[–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è]
    LOGS --> INIT1[–®–ê–ì 1: ConfigManager::begin]
    INIT1 --> WATCHDOG1[Watchdog Feed]
    WATCHDOG1 --> INIT2[–®–ê–ì 2: SystemMonitor::begin]
    INIT2 --> WATCHDOG2[Watchdog Feed]
    WATCHDOG2 --> INIT3[–®–ê–ì 3: TaskScheduler::begin]
    INIT3 --> WATCHDOG3[Watchdog Feed]
    WATCHDOG3 --> INIT4[–®–ê–ì 4: PinManager::begin]
    INIT4 --> WATCHDOG4[Watchdog Feed]
    WATCHDOG4 --> INIT5[–®–ê–ì 5: MessageQueueManager::begin]
    INIT5 --> WATCHDOG5[Watchdog Feed]
    WATCHDOG5 --> INIT6[–®–ê–ì 6: RuleEngine::begin]
    INIT6 --> WATCHDOG6[Watchdog Feed]
    WATCHDOG6 --> INIT7[–®–ê–ì 7: AlgorithmScheduler::begin]
    INIT7 --> WATCHDOG7[Watchdog Feed]
    WATCHDOG7 --> INIT8[–®–ê–ì 8: CommandExecutor::begin]
    INIT8 --> WATCHDOG8[Watchdog Feed]
    WATCHDOG8 --> INIT9[–®–ê–ì 9: NetworkManager::begin]
    INIT9 --> INIT10[–®–ê–ì 10: NodeManager::begin]
    INIT10 --> CALLBACKS[–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Callbacks]
    CALLBACKS --> READY[‚úÖ –°–∏—Å—Ç–µ–º–∞ –ì–æ—Ç–æ–≤–∞]
    
    style START fill:#e1f5fe
    style READY fill:#c8e6c9
    style WATCHDOG1 fill:#fff3e0
    style WATCHDOG2 fill:#fff3e0
    style WATCHDOG3 fill:#fff3e0
    style WATCHDOG4 fill:#fff3e0
    style WATCHDOG5 fill:#fff3e0
    style WATCHDOG6 fill:#fff3e0
    style WATCHDOG7 fill:#fff3e0
    style WATCHDOG8 fill:#fff3e0
```

**üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –≤—ã–∑–æ–≤–æ–º `SystemMonitor::getInstance().feedWatchdog()` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π.

---

## üåê Mesh-–°–µ—Ç—å: –†–µ–∞–ª—å–Ω–∞—è –°–∏—Ç—É–∞—Ü–∏—è

*–ê–Ω–∞–ª–∏–∑ NetworkManager.cpp, MeshReliabilityManager.cpp, ConnectionLossDetector.cpp*

### ‚ö†Ô∏è –ß–µ—Å—Ç–Ω—ã–µ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–∞—è–≤–ª–µ–Ω–æ | –†–µ–∞–ª—å–Ω–æ—Å—Ç—å | –ü—Ä–æ–±–ª–µ–º—ã |
|----------|----------|------------|----------|
| **–£–∑–ª—ã –≤ —Å–µ—Ç–∏** | –î–æ 20 | **–°—Ç–∞–±–∏–ª—å–Ω–æ: 5-10** | >10 —É–∑–ª–æ–≤ ‚Üí –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è |
| **Heartbeat** | 5 —Å–µ–∫—É–Ω–¥ | 5 —Å–µ–∫—É–Ω–¥ | **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ** = –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —Å–±–æ–µ–≤ |
| **–ó–∞–¥–µ—Ä–∂–∫–∞** | <50–º—Å | **50-200–º—Å –Ω–æ—Ä–º–∞** | >200–º—Å = –ø—Ä–æ–±–ª–µ–º–∞ |
| **–ü–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ | **10-30% –æ–±—ã—á–Ω–æ** | –í—ã—Å–æ–∫–∏–µ –ø–æ—Ç–µ—Ä–∏ = –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ |
| **–°–æ—Å—Ç–æ—è–Ω–∏—è —É–∑–ª–æ–≤** | ON/OFF | **5 —Å–æ—Å—Ç–æ—è–Ω–∏–π** | CONNECTED‚ÜíUNSTABLE‚ÜíDEGRADED‚ÜíDISCONNECTED‚ÜíLOST |
| **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è | **–¢—Ä–µ–±—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è** | –ú–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è –±–æ—Ä—å–±—ã —Å–æ —Å–±–æ—è–º–∏ |

### üîß –ü–æ—á–µ–º—É –¢–∞–∫ –ú–Ω–æ–≥–æ –ö–æ–¥–∞ –î–ª—è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

```cpp
// NetworkManager.cpp - —Ç—Ä–æ–µ–∫—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ update()
_mesh.update();  // –ü–µ—Ä–≤—ã–π —Ä–∞–∑
_mesh.update();  // –í—Ç–æ—Ä–æ–π —Ä–∞–∑  
_mesh.update();  // –¢—Ä–µ—Ç–∏–π —Ä–∞–∑ "–¥–ª—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏"
```

**‚ö° –†–µ–∞–ª—å–Ω–æ—Å—Ç—å:** –≠—Ç–æ –ù–ï –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –∞ **–±–æ—Ä—å–±–∞ —Å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é** painlessMesh.

### üîó –¢–æ–ø–æ–ª–æ–≥–∏—è –°–µ—Ç–∏

```mermaid
graph TB
    subgraph "üè† –ó–æ–Ω–∞ A - –¢–µ–ø–ª–∏—Ü–∞"
        NODE1[ESP32 #1<br/>–î–∞—Ç—á–∏–∫–∏ –∫–ª–∏–º–∞—Ç–∞<br/>ID: 3456789123]
        NODE2[ESP32 #2<br/>–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–∏–≤–∞<br/>ID: 2345678912]
    end
    
    subgraph "üå± –ó–æ–Ω–∞ B - –û–≥–æ—Ä–æ–¥"
        NODE3[ESP32 #3<br/>–î–∞—Ç—á–∏–∫–∏ –ø–æ—á–≤—ã<br/>ID: 1234567891]
        NODE4[ESP32 #4<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º<br/>ID: 9876543210]
    end
    
    subgraph "üè° –ó–æ–Ω–∞ C - –î–æ–º"
        NODE5[ESP32 #5<br/>–ö–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å<br/>ID: 8765432109]
    end
    
    NODE1 ---|–¥–æ 100–º| NODE2
    NODE1 ---|–¥–æ 100–º| NODE3
    NODE2 ---|–¥–æ 100–º| NODE4
    NODE3 ---|–¥–æ 100–º| NODE5
    NODE1 -.->|—Ä–µ–∑–µ—Ä–≤| NODE4
    NODE2 -.->|—Ä–µ–∑–µ—Ä–≤| NODE5
    
    style NODE1 fill:#e3f2fd
    style NODE2 fill:#e8f5e8
    style NODE3 fill:#fff3e0
    style NODE4 fill:#fce4ec
    style NODE5 fill:#f3e5f5
```

### üì® –¢–∏–ø—ã –°–æ–æ–±—â–µ–Ω–∏–π

*–ò–∑ MessageRouter.cpp –∏ NetworkManager.cpp:*

```mermaid
graph LR
    subgraph "üìä –°–∏—Å—Ç–µ–º–Ω—ã–µ –°–æ–æ–±—â–µ–Ω–∏—è"
        HEARTBEAT[heartbeat<br/>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏]
        NODE_INFO[node_info<br/>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —É–∑–ª–µ]
        PING[ping/pong<br/>–ò–∑–º–µ—Ä–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫]
    end
    
    subgraph "üå°Ô∏è –î–∞–Ω–Ω—ã–µ –î–∞—Ç—á–∏–∫–æ–≤"
        SENSOR_DATA[sensor_data<br/>–ü–æ–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤]
        SENSOR_UPDATE[sensor_update<br/>–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è]
    end
    
    subgraph "‚ö° –ö–æ–º–∞–Ω–¥—ã –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
        ACTUATOR_CMD[actuator_cmd<br/>–ö–æ–º–∞–Ω–¥—ã –∞–∫—Ç—É–∞—Ç–æ—Ä–∞–º]
        PIN_COMMAND[pin_command<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPIO]
    end
    
    HEARTBEAT -.->|–∫–∞–∂–¥—ã–µ 5—Å| NODE_INFO
    SENSOR_DATA -.->|–ø–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª—É| ACTUATOR_CMD
    PING -.->|–∫–∞–∂–¥—ã–µ 2—Å| SENSOR_UPDATE
```

---

## üå°Ô∏è –°–∏—Å—Ç–µ–º–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –î–∞—Ç—á–∏–∫–∞–º–∏

*–ò–∑ PinManager.h –∏ Structures.h:*

### üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¢–∏–ø—ã

```mermaid
graph TD
    subgraph "üå°Ô∏è –î–∞—Ç—á–∏–∫–∏ –ö–ª–∏–º–∞—Ç–∞"
        DHT11[DHT11<br/>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ¬±2¬∞C<br/>–í–ª–∞–∂–Ω–æ—Å—Ç—å ¬±5%]
        DHT22[DHT22<br/>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ¬±0.5¬∞C<br/>–í–ª–∞–∂–Ω–æ—Å—Ç—å ¬±2%]
        DHT11_HUM[DHT11_HUM<br/>–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–∏–Ω –≤–ª–∞–∂–Ω–æ—Å—Ç–∏]
        DHT22_HUM[DHT22_HUM<br/>–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–∏–Ω –≤–ª–∞–∂–Ω–æ—Å—Ç–∏]
    end
    
    subgraph "üìä –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –í—Ö–æ–¥—ã"
        ANALOG_IN[ANALOG_IN<br/>0-4095 (0-3.3V)<br/>EMA —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ]
        DIGITAL_IN[DIGITAL_IN<br/>0/1 —Å–æ—Å—Ç–æ—è–Ω–∏–µ<br/>–ê–Ω—Ç–∏–¥—Ä–µ–±–µ–∑–≥ 50–º—Å]
    end
    
    subgraph "‚ö° –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ –í—ã—Ö–æ–¥—ã"
        RELAY[RELAY<br/>–î–æ 10A/220V<br/>–ì–∞–ª—å–≤–∞–Ω–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–≤—è–∑–∫–∞]
        DIGITAL_OUT[DIGITAL_OUT<br/>0/1 —Å–æ—Å—Ç–æ—è–Ω–∏–µ<br/>3.3V –ª–æ–≥–∏–∫–∞]
    end
    
    DHT11 --> PIN_MANAGER[PinManager<br/>–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ]
    DHT22 --> PIN_MANAGER
    ANALOG_IN --> PIN_MANAGER
    DIGITAL_IN --> PIN_MANAGER
    PIN_MANAGER --> RELAY
    PIN_MANAGER --> DIGITAL_OUT
    
    style PIN_MANAGER fill:#fff3e0
    style DHT22 fill:#e8f5e8
    style RELAY fill:#ffebee
```

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –î–∞—Ç—á–∏–∫–∞

*–ò–∑ Structures.h, —Å—Ç—Ä–æ–∫–∏ 76-95:*

```cpp
struct PinConfig {
    String name;                        // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –ø–∏–Ω–∞
    uint8_t gpio;                      // –ù–æ–º–µ—Ä GPIO (0-39)
    PinType type;                      // –¢–∏–ø –¥–∞—Ç—á–∏–∫–∞/–∞–∫—Ç—É–∞—Ç–æ—Ä–∞
    String topic;                      // –¢–æ–ø–∏–∫ –¥–ª—è mesh-—Å–µ—Ç–∏
    float thresholdLow;                // –ù–∏–∂–Ω–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è –ø—Ä–∞–≤–∏–ª
    float thresholdHigh;               // –í–µ—Ä—Ö–Ω–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è –ø—Ä–∞–≤–∏–ª
    bool initialState;                 // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    unsigned long interval;            // –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ (–º—Å)
    uint8_t logLevel;                  // –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    uint8_t powerPin = 255;           // GPIO –ø–∏—Ç–∞–Ω–∏—è (—ç–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏)
    unsigned long powerStabilizeMs = 100; // –í—Ä–µ–º—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
    uint8_t buttonMode = 0;           // –†–µ–∂–∏–º –∫–Ω–æ–ø–∫–∏ (toggle/momentary)
    unsigned long debounceMs = 50;    // –ê–Ω—Ç–∏–¥—Ä–µ–±–µ–∑–≥
    unsigned long maxHoldMs = 5000;   // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è
};
```

---

## ü§ñ –°–∏—Å—Ç–µ–º–∞ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

*–ò–∑ RuleEngine.h, —Å—Ç—Ä–æ–∫–∏ 30-78:*

### üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–∞–≤–∏–ª–∞

```mermaid
graph TB
    subgraph "üìù –£—Å–ª–æ–≤–∏–µ (RuleCondition)"
        COND_TYPE[–¢–∏–ø –£—Å–ª–æ–≤–∏—è<br/>>, <, ==, !=, –ú–ï–ñ–î–£, –ò–ó–ú–ï–ù–ò–õ–û–°–¨]
        COND_SOURCE[–ò—Å—Ç–æ—á–Ω–∏–∫<br/>–¢–æ–ø–∏–∫ –∏–ª–∏ –ø–∏–Ω –¥–∞—Ç—á–∏–∫–∞]
        COND_VALUE[–ó–Ω–∞—á–µ–Ω–∏–µ<br/>–ü–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è]
    end
    
    subgraph "‚ö° –î–µ–π—Å—Ç–≤–∏–µ (RuleAction)"
        ACTION_TYPE[–¢–∏–ø –î–µ–π—Å—Ç–≤–∏—è<br/>PIN_STATE, MESSAGE, LOG, TASK]
        ACTION_TARGET[–¶–µ–ª—å<br/>–ü–∏–Ω, —É–∑–µ–ª, –∏–ª–∏ –¥—Ä—É–≥–∞—è —Ü–µ–ª—å]
        ACTION_PAYLOAD[–î–∞–Ω–Ω—ã–µ<br/>–ö–æ–º–∞–Ω–¥–∞ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã]
    end
    
    subgraph "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü—Ä–∞–≤–∏–ª–∞"
        RULE_ID[ID –ø—Ä–∞–≤–∏–ª–∞<br/>–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä]
        RULE_ENABLED[–í–∫–ª—é—á–µ–Ω–æ<br/>true/false]
        RULE_COOLDOWN[–ö—É–ª–¥–∞—É–Ω<br/>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è–º–∏]
        RULE_COUNT[–°—á–µ—Ç—á–∏–∫<br/>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π]
    end
    
    COND_TYPE --> RULE_ENGINE[RuleEngine<br/>–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–∞–≤–∏–ª]
    COND_SOURCE --> RULE_ENGINE
    COND_VALUE --> RULE_ENGINE
    RULE_ENGINE --> ACTION_TYPE
    RULE_ENGINE --> ACTION_TARGET
    RULE_ENGINE --> ACTION_PAYLOAD
    
    style RULE_ENGINE fill:#fff3e0
```

### üîÑ –ü–æ—Ç–æ–∫ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ü—Ä–∞–≤–∏–ª–∞

```mermaid
graph TD
    SENSOR[üå°Ô∏è –ü–æ–∫–∞–∑–∞–Ω–∏–µ –î–∞—Ç—á–∏–∫–∞<br/>temp1 = 28.5¬∞C] --> CHECK_RULES[üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ü—Ä–∞–≤–∏–ª<br/>RuleEngine::checkRules]
    CHECK_RULES --> FIND_RULE[üìù –ù–∞–π—Ç–∏ –ü–æ–¥—Ö–æ–¥—è—â–∏–µ –ü—Ä–∞–≤–∏–ª–∞<br/>temp1 > 25.0]
    FIND_RULE --> CHECK_COOLDOWN[‚è∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ö—É–ª–¥–∞—É–Ω–∞<br/>–ü—Ä–æ—à–ª–æ –ª–∏ 60 —Å–µ–∫—É–Ω–¥?]
    CHECK_COOLDOWN --> |–î–∞| EXECUTE[‚ö° –í—ã–ø–æ–ª–Ω–∏—Ç—å –î–µ–π—Å—Ç–≤–∏–µ<br/>fan1 = ON]
    CHECK_COOLDOWN --> |–ù–µ—Ç| SKIP[‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å]
    EXECUTE --> UPDATE_STATS[üìä –û–±–Ω–æ–≤–∏—Ç—å –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É<br/>–°—á–µ—Ç—á–∏–∫ + 1, –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è]
    UPDATE_STATS --> LOG[üìù –ó–∞–ø–∏—Å–∞—Ç—å –≤ –õ–æ–≥<br/>Rule 'cooling' triggered]
    SKIP --> WAIT[‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –°–ª–µ–¥—É—é—â–µ–≥–æ –¶–∏–∫–ª–∞]
    LOG --> WAIT
    
    style CHECK_RULES fill:#e3f2fd
    style EXECUTE fill:#c8e6c9
    style SKIP fill:#fff3e0
```

---

## üíæ –°–∏—Å—Ç–µ–º–∞ –•—Ä–∞–Ω–µ–Ω–∏—è –î–∞–Ω–Ω—ã—Ö

*–ò–∑ ConfigManager.cpp –∏ main.cpp:*

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –§–∞–π–ª–æ–≤–æ–π –°–∏—Å—Ç–µ–º—ã

```
LittleFS (4MB Flash –ø–∞–º—è—Ç—å)
‚îú‚îÄ‚îÄ /config.json              # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ /config_backup.json       # –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ /wifi_config.json         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Wi-Fi —Å–µ—Ç–∏
‚îú‚îÄ‚îÄ /node_name.json          # –ò–º—è —É–∑–ª–∞ –≤ —Å–µ—Ç–∏
‚îú‚îÄ‚îÄ /node_access.json        # –£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ —É–∑–ª–∞
‚îú‚îÄ‚îÄ /rules.json              # –ü—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ /tasks.json              # –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
‚îú‚îÄ‚îÄ /algorithms.json         # –ê–ª–≥–æ—Ä–∏—Ç–º—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
‚îú‚îÄ‚îÄ /pins/                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–∞—Ç—á–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ temp1.json
‚îÇ   ‚îú‚îÄ‚îÄ soil1.json
‚îÇ   ‚îî‚îÄ‚îÄ pump1.json
‚îî‚îÄ‚îÄ /logs/                   # –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### üîí –°–∏—Å—Ç–µ–º–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

*–ò–∑ SafeMemory.h –∏ SafeMath.h:*

```mermaid
graph TB
    subgraph "üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –ü–∞–º—è—Ç–∏ (SafeMemory)"
        BUFFER_CHECK[–ü—Ä–æ–≤–µ—Ä–∫–∞ –ì—Ä–∞–Ω–∏—Ü –ë—É—Ñ–µ—Ä–æ–≤]
        MEMORY_LEAK[–ö–æ–Ω—Ç—Ä–æ–ª—å –£—Ç–µ—á–µ–∫ –ü–∞–º—è—Ç–∏]
        STACK_OVERFLOW[–ó–∞—â–∏—Ç–∞ –æ—Ç Stack Overflow]
    end
    
    subgraph "üßÆ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (SafeMath)"
        DIV_ZERO[–ó–∞—â–∏—Ç–∞ –æ—Ç –î–µ–ª–µ–Ω–∏—è –Ω–∞ –ù–æ–ª—å]
        OVERFLOW[–ö–æ–Ω—Ç—Ä–æ–ª—å –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–π]
        FLOAT_VALIDATION[–ü—Ä–æ–≤–µ—Ä–∫–∞ Float –ó–Ω–∞—á–µ–Ω–∏–π]
    end
    
    subgraph "‚è∞ –°–∏—Å—Ç–µ–º–Ω—ã–π –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (SystemMonitor)"
        WATCHDOG[Watchdog Timer<br/>–°–±—Ä–æ—Å –ø—Ä–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–∏]
        HEAP_MONITOR[–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ö—É—á–∏<br/>–ö–æ–Ω—Ç—Ä–æ–ª—å —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏]
        UPTIME[–°—á–µ—Ç—á–∏–∫ –í—Ä–µ–º–µ–Ω–∏ –†–∞–±–æ—Ç—ã<br/>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏]
    end
    
    BUFFER_CHECK --> WATCHDOG
    DIV_ZERO --> WATCHDOG
    MEMORY_LEAK --> HEAP_MONITOR
    OVERFLOW --> HEAP_MONITOR
    
    style WATCHDOG fill:#ffebee
    style HEAP_MONITOR fill:#fff3e0
```

---

## üìä –†–µ–∞–ª—å–Ω–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –°–∏—Å—Ç–µ–º—ã

*–ß–µ—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑—É—á–µ–Ω–∏—è –∫–æ–¥–∞ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ—à–∏–±–æ–∫*

### üîç –†–∞–∑–º–µ—Ä –ö–æ–¥–∞ (–ß—Ç–æ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –°–ª–æ–∂–Ω–æ—Å—Ç—å)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –û —á—ë–º —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç |
|-----------|------------|-------------------|
| **CommandExecutor** | 6286 | 70% –∫–æ–¥–∞ = –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| **PinManager** | 1635 | –ú–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è –∫–∞–ø—Ä–∏–∑–Ω—ã—Ö DHT –¥–∞—Ç—á–∏–∫–æ–≤ |
| **NetworkManager** | 948 | –ü–æ–ª–æ–Ω fallback'–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π |
| **MeshStatisticsManager** | 1052 | –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ç–∏ |
| **ConnectionLossDetector** | 690 | –¶–µ–ª—ã–π –º–æ–¥—É–ª—å —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–±–æ–µ–≤ |
| **MeshReliabilityManager** | 642 | –ï—â—ë –æ–¥–∏–Ω –º–æ–¥—É–ª—å –¥–ª—è –±–æ—Ä—å–±—ã —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ |

**ü§î –í—ã–≤–æ–¥:** **~17% –∫–æ–¥–∞** –Ω–∞–ø–∏—Å–∞–Ω–æ –¥–ª—è **–±–æ—Ä—å–±—ã —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏**, –∞ –Ω–µ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

### üíæ –†–µ–∞–ª—å–Ω–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ü–∞–º—è—Ç–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | RAM | –ü—Ä–æ–±–ª–µ–º—ã |
|-----------|-----|----------|
| **painlessMesh** | ~50KB | –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —Å–±–æ—è—Ö |
| **–ù–∞—à–∏ –±—É—Ñ–µ—Ä—ã** | ~30KB | JSON –±—É—Ñ–µ—Ä—ã –±—ã—Å—Ç—Ä–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è |
| **ArduinoJson** | ~10KB | –ú–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö |
| **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞/–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | ~15KB | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã |
| **–°–≤–æ–±–æ–¥–Ω–æ** | ~410KB ‚Üí **~300KB** | **–†–µ–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ –º–µ–Ω—å—à–µ** |

**‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ >8 —á–∞—Å–æ–≤ —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å –ø–∞–¥–∞–µ—Ç –¥–æ **200KB** –∏–∑-–∑–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏.

### ‚ö° –ß–µ—Å—Ç–Ω–∞—è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–µ–æ—Ä–∏—è | **–†–µ–∞–ª—å–Ω–æ—Å—Ç—å** | –ü–æ—á–µ–º—É —Ç–∞–∫ |
|----------|--------|---------------|------------|
| **Mesh –∑–∞–¥–µ—Ä–∂–∫–∞** | <50–º—Å | **100-300–º—Å** | –ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏ –ø–æ—Ç–µ—Ä—è—Ö |
| **–ö–æ–º–∞–Ω–¥—ã CLI** | <10–º—Å | **50-200–º—Å** | –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ |  
| **DHT —á—Ç–µ–Ω–∏–µ** | 2—Å–µ–∫ | **3-5—Å–µ–∫** | Backoff –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö |
| **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** | 1KB/—Å–µ–∫ | **0.3-0.8KB/—Å–µ–∫** | –°–ª—É–∂–µ–±–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ |
| **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —É–∑–ª–∞** | 99% | **80-95%** | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Å–ª–æ–≤–∏–π WiFi |

---

## üéØ –ß–µ—Å—Ç–Ω–∞—è –û—Ü–µ–Ω–∫–∞ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### ‚úÖ –ß—Ç–æ –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –†–∞–±–æ—Ç–∞–µ—Ç

1. **üìù –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: 72 –∫–æ–º–∞–Ω–¥—ã - —Ä–µ–∞–ª—å–Ω–æ —É–¥–æ–±–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2. **üîß –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: 35 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–æ—Ç–∫–ª—é—á–∞—Ç—å  
3. **üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π**: Watchdog –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–ø–∞—Å–∞–µ—Ç
4. **‚öôÔ∏è JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–ø—Ä–æ—à–∏–≤–∫–∏ - –ø–æ–ª–µ–∑–Ω–æ
5. **üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –ú–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–±–ª–µ–º

### ‚ùå –û—Å–Ω–æ–≤–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã  

1. **üåê –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–µ—Ç—å**: 
   - 5 —Å–æ—Å—Ç–æ—è–Ω–∏–π —É–∑–ª–æ–≤ (–æ—Ç CONNECTED –¥–æ LOST)
   - –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - **40% –∫–æ–¥–∞** –¥–ª—è –±–æ—Ä—å–±—ã —Å–æ —Å–±–æ—è–º–∏

2. **üíæ –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é**:
   - –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞ 8+ —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã
   - –£—Ç–µ—á–∫–∏ –≤ painlessMesh –ø—Ä–∏ —Å–±–æ—è—Ö
   - "SafeMemory" = –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–µ –≤–æ–ª—à–µ–±—Å—Ç–≤–æ

3. **‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∏–∂–µ –∑–∞—è–≤–ª–µ–Ω–Ω–æ–π**:
   - –ó–∞–¥–µ—Ä–∂–∫–∏ 100-300–º—Å –≤–º–µ—Å—Ç–æ <50–º—Å
   - –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å 0.3-0.8KB/—Å–µ–∫
   - DHT –¥–∞—Ç—á–∏–∫–∏ —á–∞—Å—Ç–æ "–Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç"

4. **üîß –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
   - CLI —á–µ—Ä–µ–∑ Serial - –Ω–µ –¥–ª—è –≤—Å–µ—Ö
   - –ú–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ç—Ä–µ–±—É—é—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è
   - –ù–µ—Ç GUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### ü§î –ß–µ—Å—Ç–Ω—ã–µ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**üëç –°—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:**
- –ò–∑—É—á–µ–Ω–∏—è IoT –∏ mesh-—Å–µ—Ç–µ–π
- –ü—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–µ–∫—Ç–æ–≤ –≥–¥–µ –≤–∞–∂–Ω–µ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —á–µ–º —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

**üëé –ù–ï —Å—Ç–æ–∏—Ç –¥–ª—è:**
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º (–ø–æ–ª–∏–≤ –¥–æ—Ä–æ–≥–∏—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π)
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–µ–∑ –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- –õ—é–¥–µ–π –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞

---

## üîÑ **–ü–û–¢–û–ö –î–ê–ù–ù–´–•: –ü–û–î–†–û–ë–ù–ê–Ø –°–•–ï–ú–ê**

### **üìä –û—Ç –î–∞—Ç—á–∏–∫–∞ –∫ –î–µ–π—Å—Ç–≤–∏—é**

```mermaid
graph TD
    subgraph Sensors["üå°Ô∏è –î–∞—Ç—á–∏–∫–∏"]
        DHT22["DHT22<br/>GPIO 4,5,12-15<br/>–ò–Ω—Ç–µ—Ä–≤–∞–ª: 2+ —Å–µ–∫<br/>–¢–æ—á–Ω–æ—Å—Ç—å: ¬±0.5¬∞C"]
        ANALOG["–ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ<br/>GPIO 32-39<br/>0-3.3V, 12-–±–∏—Ç<br/>EMA —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ"]
        DIGITAL["–¶–∏—Ñ—Ä–æ–≤—ã–µ<br/>–í—Å–µ GPIO –∫—Ä–æ–º–µ 6-11<br/>3.3V –ª–æ–≥–∏–∫–∞<br/>–ê–Ω—Ç–∏–¥—Ä–µ–±–µ–∑–≥: 50–º—Å"]
    end

    subgraph Processing["‚öôÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞"]
        PIN_MGR["üîå PinManager<br/>1635 —Å—Ç—Ä–æ–∫<br/>–ß—Ç–µ–Ω–∏–µ + –≤–∞–ª–∏–¥–∞—Ü–∏—è<br/>EMA —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è"]
        SENSOR_PUB["üìä SensorPublisher<br/>860 —Å—Ç—Ä–æ–∫<br/>MQTT-like —Ç–æ–ø–∏–∫–∏<br/>–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON"]
        RULE_ENGINE["‚ö° RuleEngine<br/>518 —Å—Ç—Ä–æ–∫<br/>IF-THEN –ª–æ–≥–∏–∫–∞<br/>Cooldown 60 —Å–µ–∫"]
        ALGO_SCHED["ü§ñ AlgorithmScheduler<br/>759 —Å—Ç—Ä–æ–∫<br/>ML –æ–±—Ä–∞–±–æ—Ç–∫–∞<br/>–°–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã"]
    end

    subgraph Network["üåê –°–µ—Ç—å"]
        MESH_NET["üåê NetworkManager<br/>948 —Å—Ç—Ä–æ–∫<br/>painlessMesh<br/>WiFi STA/AP"]
        MSG_QUEUE["üì¨ MessageQueueManager<br/>231 —Å—Ç—Ä–æ–∫–∞<br/>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å<br/>–ù–∞–¥–µ–∂–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞"]
        REMOTE_NODES["üè† –£–¥–∞–ª–µ–Ω–Ω—ã–µ –£–∑–ª—ã<br/>–î–æ 20 —É—Å—Ç—Ä–æ–π—Å—Ç–≤<br/>–ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è"]
    end

    subgraph Actuators["‚ö° –ê–∫—Ç—É–∞—Ç–æ—Ä—ã"]
        RELAY["üîå –†–µ–ª–µ<br/>GPIO –≤—Å–µ –∫—Ä–æ–º–µ 6-11<br/>–î–æ 10A/220V<br/>–ì–∞–ª—å–≤–∞–Ω–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–≤—è–∑–∫–∞"]
        LED["üí° LED<br/>GPIO –≤—Å–µ –∫—Ä–æ–º–µ 6-11<br/>3.3V, 12mA<br/>PWM –ø–æ–¥–¥–µ—Ä–∂–∫–∞"]
        DIGITAL_OUT["üîå –¶–∏—Ñ—Ä–æ–≤—ã–µ –í—ã—Ö–æ–¥—ã<br/>GPIO –≤—Å–µ –∫—Ä–æ–º–µ 6-11<br/>3.3V –ª–æ–≥–∏–∫–∞<br/>–°–æ—Å—Ç–æ—è–Ω–∏–µ ON/OFF"]
    end

    %% –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
    DHT22 --> PIN_MGR
    ANALOG --> PIN_MGR
    DIGITAL --> PIN_MGR

    PIN_MGR --> SENSOR_PUB
    PIN_MGR --> RULE_ENGINE
    PIN_MGR --> ALGO_SCHED

    SENSOR_PUB --> MESH_NET
    RULE_ENGINE --> MSG_QUEUE
    ALGO_SCHED --> MSG_QUEUE

    MSG_QUEUE --> MESH_NET
    MESH_NET --> REMOTE_NODES

    RULE_ENGINE --> RELAY
    RULE_ENGINE --> LED
    RULE_ENGINE --> DIGITAL_OUT
    MSG_QUEUE --> REMOTE_NODES

    %% –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
    PIN_MGR -.->|–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥| SENSOR_CONN_MON["üì° SensorConnectionMonitor<br/>828 —Å—Ç—Ä–æ–∫<br/>–î–µ—Ç–µ–∫—Ü–∏—è —Å–±–æ–µ–≤"]
    MESH_NET -.->|–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞| MESH_STATS["üìä MeshStatisticsManager<br/>1052 —Å—Ç—Ä–æ–∫–∏<br/>–ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞"]
    MSG_QUEUE -.->|–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å| MESH_RELIAB["üîß MeshReliabilityManager<br/>642 —Å—Ç—Ä–æ–∫–∏<br/>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"]

    SENSOR_CONN_MON -.->|–ê–ª–µ—Ä—Ç—ã| NOTIF_SYS["üîî NotificationSystem<br/>484 —Å—Ç—Ä–æ–∫–∏<br/>–°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"]
    MESH_STATS -.->|–ê–Ω–∞–ª–∏–∑| SELF_REFLECT["üß† SelfReflectionSystem<br/>414 —Å—Ç—Ä–æ–∫<br/>–ê–≤—Ç–æ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è"]
    MESH_RELIAB -.->|–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ| AUTO_CONN["üîÑ AutoConnectionManager<br/>88 —Å—Ç—Ä–æ–∫<br/>–ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"]

    %% –°—Ç–∏–ª–∏
    style PIN_MGR fill:#feca57,stroke:#fff,stroke-width:3px
    style RULE_ENGINE fill:#96ceb4,stroke:#fff,stroke-width:3px
    style MESH_NET fill:#45b7d1,stroke:#fff,stroke-width:3px
    style RELAY fill:#ff6b6b,stroke:#fff,stroke-width:2px
    style SENSOR_CONN_MON fill:#dda0dd,stroke:#fff,stroke-width:2px
```

---

## üéØ **–í–´–í–û–î–´ –ü–û –ê–†–•–ò–¢–ï–ö–¢–£–†–ï**

### **‚úÖ –°–∏–ª—å–Ω—ã–µ –°—Ç–æ—Ä–æ–Ω—ã:**
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–ó–∞—â–∏—â–µ–Ω–Ω–æ—Å—Ç—å** - –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ø–æ–¥—Ä–æ–±–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –∞—Å–ø–µ–∫—Ç–æ–≤
- **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### **‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ó–æ–Ω—ã:**
- **–ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å** - 17% –∫–æ–¥–∞ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å** - 35 –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –º–Ω–æ–≥–æ overhead –Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
- **–û—Ç–ª–∞–¥–∫–∞** - —Å–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ ESP32 —Ä–µ—Å—É—Ä—Å–∞–º–∏

### **üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å** –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è production
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å** CommandExecutor (—Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
3. **–í—ã–Ω–µ—Å—Ç–∏** —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–µ—Ç–µ–π
4. **–î–æ–±–∞–≤–∏—Ç—å** –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
5. **–°–æ–∑–¥–∞—Ç—å** —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã (debug/production/minimal)

---

## üèÜ **–§–ò–ù–ê–õ–¨–ù–ê–Ø –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–Ø**

**AgriSwarm –∏—Å–ø–æ–ª—å–∑—É–µ—Ç "–ú–æ–¥—É–ª—å–Ω—ã–π –ú–æ–Ω–æ–ª–∏—Ç —Å –≠–ª–µ–º–µ–Ω—Ç–∞–º–∏ –ú–∏–∫—Ä–æ—è–¥—Ä–∞" - —ç—Ç–æ:**

- ‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** –∫ embedded —Å–∏—Å—Ç–µ–º–∞–º
- ‚úÖ **–ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ—Å—Ç–æ—Ç–æ–π** –∏ –≥–∏–±–∫–æ—Å—Ç—å—é
- ‚úÖ **–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä** –¥–ª—è ESP32 —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π** –æ—Ç –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –¥–æ –Ω–µ–±–æ–ª—å—à–æ–π —Å–µ—Ç–∏
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** –¥–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ö–∞–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤—ã–±—Ä–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á. –û–Ω–∞ —Å–æ—á–µ—Ç–∞–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –ø—Ä–æ—Å—Ç–æ—Ç—ã —Å –º–æ–¥—É–ª—å–Ω–æ–π –≥–∏–±–∫–æ—Å—Ç—å—é, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ—ë –∏–¥–µ–∞–ª—å–Ω–æ–π –¥–ª—è IoT —Å–∏—Å—Ç–µ–º –Ω–∞ –±–∞–∑–µ ESP32! üöÄüìê

**üìã –ò—Ç–æ–≥–æ–≤–∞—è –û—Ü–µ–Ω–∫–∞:** AgriSwarm - —ç—Ç–æ **–¥–æ–±—Ä–æ—Ç–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—Å–Ω–æ–≤–∞** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏, –Ω–æ **—Ç—Ä–µ–±—É—é—â–∞—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π**. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –∫–∞–ø—Ä–∏–∑–Ω–∞ –∏ —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤ –∏ –æ–±—É—á–µ–Ω–∏—è, –Ω–æ –Ω–µ –¥–ª—è "–ø–æ—Å—Ç–∞–≤–∏–ª –∏ –∑–∞–±—ã–ª".
