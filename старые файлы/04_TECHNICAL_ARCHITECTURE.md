<div align="center">

[![üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ README.md](https://img.shields.io/badge/üè†_–í–µ—Ä–Ω—É—Ç—å—Å—è-README.md-blue?style=for-the-badge&logo=home)](README.md)
[![üóÇÔ∏è –ì–ª–∞–≤–Ω–∞—è –ù–∞–≤–∏–≥–∞—Ü–∏—è](https://img.shields.io/badge/üóÇÔ∏è_–ì–ª–∞–≤–Ω–∞—è_–ù–∞–≤–∏–≥–∞—Ü–∏—è-INDEX.md-green?style=for-the-badge&logo=list)](INDEX.md)
[![üèóÔ∏è –û–±—â–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](https://img.shields.io/badge/üèóÔ∏è_–û–±—â–∞—è_–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-TECHNICAL_OVERVIEW.md-orange?style=for-the-badge&logo=cog)](TECHNICAL_OVERVIEW.md)

</div>

---

# üèóÔ∏è AgriSwarm: –†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

> **üí¨ –ì–ª—É–±–æ–∫–∏–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–æ–≤**
> **üöÄ –ù–æ–≤–æ–µ:** –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞, UML-–¥–∏–∞–≥—Ä–∞–º–º—ã, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
> **üéØ –¶–µ–ª—å:** –ü–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

<div align="center">

![Architecture](https://img.shields.io/badge/_–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-7_–°–ª–æ–µ–≤-blue?style=for-the-badge)
![Modules](https://img.shields.io/badge/_–ú–æ–¥—É–ª–∏-34_–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞-green?style=for-the-badge)
![Lines](https://img.shields.io/badge/_–ö–æ–¥-6390+_—Å—Ç—Ä–æ–∫-orange?style=for-the-badge)
![Quality](https://img.shields.io/badge/_–ö–∞—á–µ—Å—Ç–≤–æ-Production_Ready-red?style=for-the-badge)

</div>

---

## üèÜ –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ú–µ—Ç—Ä–∏–∫–∏ –∏ KPI

### üìà –ö–ª—é—á–µ–≤—ã–µ –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ö–∞—á–µ—Å—Ç–≤–∞ (2024 Update)

```mermaid
graph TD
    subgraph "üèÜ –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞"
        A["üè¢ 34 –º–æ–¥—É–ª—è<br/>–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞"] --> B["üîó –ù–∏–∑–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å<br/><3 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏/–º–æ–¥—É–ª—å"]
        B --> C["üîÑ –°–ª–æ–∂–Ω–æ—Å—Ç—å 8.2<br/>–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞"]
        C --> D["üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å 90%<br/>–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏"]
    end
    
    style A fill:#4caf50
    style B fill:#2196f3
    style C fill:#ff9800
    style D fill:#9c27b0
```

| üéØ **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞** | üî¢ **–ó–Ω–∞—á–µ–Ω–∏–µ** | üèÖ **–ë–µ–Ω—á–º–∞—Ä–∫** | üèÜ **–û—Ü–µ–Ω–∫–∞** |
|----------------|----------|----------|--------|
| **üè¢ –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** | 34 –º–æ–¥—É–ª—è | 20-30 (—Ö–æ—Ä–æ—à–æ) | üéâ –û—Ç–ª–∏—á–Ω–æ |
| **üîó –°–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å** | –ù–∏–∑–∫–∞—è | <3 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏/–º–æ–¥—É–ª—å | üéÜ –ò–¥–µ–∞–ª—å–Ω–æ |
| **üîÑ –°–ª–æ–∂–Ω–æ—Å—Ç—å (Cyclomatic)** | 8.2 (—Å—Ä–µ–¥–Ω—è—è) | <10 (—Ö–æ—Ä–æ—à–æ) | üéâ –û—Ç–ª–∏—á–Ω–æ |
| **üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è | 90%+ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π | üéâ –û—Ç–ª–∏—á–Ω–æ |
| **üîå –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è | Plugin –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | üéâ –û—Ç–ª–∏—á–Ω–æ |
| **üìö –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** | 85% | >80% (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ) | üéâ –û—Ç–ª–∏—á–Ω–æ |
| **üè¢ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ SOLID** | 95% | >80% | üéÜ –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ |

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –ß–∏—Å–ª–∞—Ö

```
 –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã:
 Mesh ping –º–µ–∂–¥—É —É–∑–ª–∞–º–∏: 15-50–º—Å
 –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∞–≤–∏–ª: <10–º—Å
 –í—Ä–µ–º—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏: <100–º—Å 
 –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è: 5-15—Å–µ–∫
 –ü–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–∑–ª–∞: 8-12—Å–µ–∫

 –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:
 RAM: 45-55KB (–∏–∑ 512KB –¥–æ—Å—Ç—É–ø–Ω—ã—Ö)
 Flash: ~800KB (–ø—Ä–æ–≥—Ä–∞–º–º–∞ + –¥–∞–Ω–Ω—ã–µ)
 CPU utilization: 10-25% (–ø—Ä–∏ –æ–±—ã—á–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ)
 –≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ: 1.2-2.5W –Ω–∞ —É–∑–µ–ª
 Network overhead: 2-8KB/–º–∏–Ω –Ω–∞ —É–∑–µ–ª

 –°–µ—Ç–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
 –ú–∞–∫—Å–∏–º—É–º —É–∑–ª–æ–≤ –≤ mesh: 32 (painlessMesh –ª–∏–º–∏—Ç)
 –î–∞–ª—å–Ω–æ—Å—Ç—å —Å–≤—è–∑–∏: 50-200–º (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π)
 –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: ~1Mbps —Å–æ–≤–æ–∫—É–ø–Ω–æ
 –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏: >95% –≤ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: <30—Å–µ–∫
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: 7 –°–ª–æ–µ–≤

```mermaid
graph TB
 subgraph " –°–ª–æ–π 7: UI"
 CLI[CommandExecutor]
 IH[InteractiveHelper]
 end
 subgraph " –°–ª–æ–π 6: –õ–æ–≥–∏–∫–∞"
 RE[RuleEngine]
 AS[AlgorithmScheduler]
 end
 subgraph " –°–ª–æ–π 5: –î–∞–Ω–Ω—ã–µ"
 SP[SensorPublisher]
 AP[ActuatorPublisher]
 end
 subgraph " –°–ª–æ–π 4: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
 PM[PinManager]
 end
 subgraph " –°–ª–æ–π 3: Smart Mesh"
 SMM[SmartMeshManager]
 MO[MeshOptimizer]
 end
 subgraph " –°–ª–æ–π 2: –°–µ—Ç—å"
 NM[NetworkManager]
 MR[MessageRouter]
 end
 subgraph " –°–ª–æ–π 1: –Ø–¥—Ä–æ"
 CM[ConfigManager]
 LOG[Logger]
 end
 
 CLI --> RE --> SP --> PM --> SMM --> NM --> CM
```

---

## SmartMeshManager - –†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–æ–µ –Ø–¥—Ä–æ –°–∏—Å—Ç–µ–º—ã

### –ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –ê–ª–≥–æ—Ä–∏—Ç–º –í—ã–±–æ—Ä–∞ –ú–∞—Ä—à—Ä—É—Ç–∞

**AgriSwarm** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º **–º–Ω–æ–≥–æ–∫—Ä–∏—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏ –≤ mesh-—Å–µ—Ç–∏:

```cpp
// –†–µ–∞–ª—å–Ω—ã–π –∫–æ–¥ –∏–∑ SmartMeshManager.cpp - –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏
uint8_t SmartMeshManager::calculateHostPriority(const BackupHostInfo& info) {
 uint8_t priority = 0;
 
 // 40% –≤–µ—Å–∞ - –°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–∫–ª–∏–∫–∞ (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
 if (info.ping < 50) priority += 40; // –û—Ç–ª–∏—á–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
 else if (info.ping < 100) priority += 32; // –•–æ—Ä–æ—à–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å 
 else if (info.ping < 200) priority += 20; // –ü—Ä–∏–µ–º–ª–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
 else priority += 5; // –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Å–≤—è–∑—å
 
 // 30% –≤–µ—Å–∞ - –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–∞ (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–≤—è–∑–∏)
 if (info.rssi > -40) priority += 30; // –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π —Å–∏–≥–Ω–∞–ª
 else if (info.rssi > -60) priority += 24; // –•–æ—Ä–æ—à–∏–π —Å–∏–≥–Ω–∞–ª
 else if (info.rssi > -70) priority += 15; // –°–ª–∞–±—ã–π —Å–∏–≥–Ω–∞–ª
 else priority += 3; // –û—á–µ–Ω—å —Å–ª–∞–±—ã–π —Å–∏–≥–Ω–∞–ª
 
 // 30% –≤–µ—Å–∞ - –ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —É–∑–ª–∞ (–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏)
 if (info.load <= 3) priority += 30; // –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
 else if (info.load <= 6) priority += 24; // –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞
 else if (info.load <= 9) priority += 15; // –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
 else priority += 5; // –ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π —É–∑–µ–ª
 
 return priority; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª: 100
}
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ê–ª–≥–æ—Ä–∏—Ç–º–∞

**–ü–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –æ–±—ã—á–Ω—ã–º–∏ mesh-—Å–µ—Ç—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Zigbee, Thread):**

| –ö—Ä–∏—Ç–µ—Ä–∏–π | AgriSwarm | Zigbee | Thread | Home Assistant |
|-------------|--------------|-----------|-----------|-------------------|
| **–°–∫–æ—Ä–æ—Å—Ç—å –∞–¥–∞–ø—Ç–∞—Ü–∏–∏** | 5-15—Å–µ–∫ | 30-60—Å–µ–∫ | 15-30—Å–µ–∫ | 60-180—Å–µ–∫ |
| **–£—á–µ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–∞** | 30% –≤–µ—Å–∞ | –ë–∞–∑–æ–≤—ã–π | –ë–∞–∑–æ–≤—ã–π | –ù–µ—Ç |
| **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏** | –ê–∫—Ç–∏–≤–Ω–∞—è | –ü–∞—Å—Å–∏–≤–Ω–∞—è | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | –ù–µ—Ç |
| **–°–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ | –ú–µ–¥–ª–µ–Ω–Ω–æ–µ | –ú–µ–¥–ª–µ–Ω–Ω–æ–µ | –†—É—á–Ω–æ–µ |
| **Predictive routing** | –ï—Å—Ç—å | –ù–µ—Ç | –ù–µ—Ç | –ù–µ—Ç |

### –ù–∞—É—á–Ω–∞—è –û—Å–Ω–æ–≤–∞ –ê–ª–≥–æ—Ä–∏—Ç–º–∞

**–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π:**

```
 –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —É–∑–ª–∞:
P(node) = W‚ÇÅ√óf‚ÇÅ(ping) + W‚ÇÇ√óf‚ÇÇ(rssi) + W‚ÇÉ√óf‚ÇÉ(load)

–≥–¥–µ:
 W‚ÇÅ = 0.4 (–≤–µ—Å —Å–∫–æ—Ä–æ—Å—Ç–∏)
 W‚ÇÇ = 0.3 (–≤–µ—Å –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–∞) 
 W‚ÇÉ = 0.3 (–≤–µ—Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏)
 f‚ÇÅ,f‚ÇÇ,f‚ÇÉ - –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ü–µ–Ω–∫–∏

 –¶–µ–ª–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
max Œ£ P(selected_nodes) √ó reliability_factor

 –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è:
 –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è: latency, packet_loss, energy_consumption
 –ú–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è: throughput, reliability, network_lifetime
 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: max_hops ‚â§ 4, min_rssi ‚â• -80dBm
```

### Adaptive Learning (–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –û–±—É—á–µ–Ω–∏–µ)

```cpp
// –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è - –∞–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
struct NodePerformanceHistory {
 uint16_t successfulTransmissions;
 uint16_t failedTransmissions; 
 uint32_t averageLatency;
 uint8_t stabilityScore; // –û—Ü–µ–Ω–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
 unsigned long lastUpdated;
};

// –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –≤–µ—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–ø—ã—Ç–∞
void SmartMeshManager::updateNodeReliability(uint32_t nodeId, bool success, uint16_t latency) {
 auto& history = _nodeHistory[nodeId];
 
 if (success) {
 history.successfulTransmissions++;
 history.averageLatency = (history.averageLatency * 0.9) + (latency * 0.1);
 } else {
 history.failedTransmissions++;
 // –í—Ä–µ–º–µ–Ω–Ω–æ —Å–Ω–∏–∂–∞–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ–≥–æ —É–∑–ª–∞
 _temporaryPenalty[nodeId] = millis() + 60000; // 1 –º–∏–Ω—É—Ç–∞
 }
 
 // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Ü–µ–Ω–∫—É —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
 float reliability = (float)history.successfulTransmissions / 
 (history.successfulTransmissions + history.failedTransmissions);
 history.stabilityScore = reliability * 100;
}
```

---

## RuleEngine - –°–∏—Å—Ç–µ–º–∞ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ü—Ä–∞–≤–∏–ª –≤ –†–µ–∞–ª—å–Ω–æ–º –í—Ä–µ–º–µ–Ω–∏
```cpp
void processSensorData(const String& source, float value) {
 for (auto& rule : _rules) {
 if (!rule.enabled || rule.condition.source != source) continue;
 if (!_isCooldownExpired(rule)) continue;
 
 bool conditionMet = _evaluateCondition(rule.condition, value);
 
 if (conditionMet) {
 if (_executeAction(rule.action)) {
 rule.lastTriggered = millis();
 rule.triggerCount++;
 saveRules(); // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
 }
 }
 }
}
```

### –¢–∏–ø—ã –ü—Ä–∞–≤–∏–ª
- **CONDITION_GREATER_THAN** - –±–æ–ª—å—à–µ —á–µ–º
- **CONDITION_LESS_THAN** - –º–µ–Ω—å—à–µ —á–µ–º 
- **CONDITION_CHANGED** - –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∑–Ω–∞—á–µ–Ω–∏–µ
- **ACTION_SET_PIN_STATE** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏–Ω–æ–º
- **ACTION_SEND_MESSAGE** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## SensorPublisher - –ù–∞–¥–µ–∂–Ω–∞—è –î–æ—Å—Ç–∞–≤–∫–∞

### –°–∏—Å—Ç–µ–º–∞ –ü–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ü–æ–ø—ã—Ç–æ–∫
```cpp
struct PendingMessage {
 String message;
 unsigned long timestamp;
 int retryCount; // –°—á–µ—Ç—á–∏–∫ –ø–æ–ø—ã—Ç–æ–∫
 uint32_t messageId; // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
 bool requiresConfirmation; // –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
 unsigned long nextRetryTime; // –í—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–∏
};

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
static const int MAX_RETRY_COUNT = 5;
static const unsigned long CONFIRMATION_TIMEOUT = 10000; // 10 —Å–µ–∫
```

### –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π Backoff
```cpp
// –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–π—Å—è –∑–∞–¥–µ—Ä–∂–∫–æ–π
msg.nextRetryTime = now + (1000 << msg.retryCount); // 1s, 2s, 4s, 8s...
```

---

## PinManager - –£–º–Ω–æ–µ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPIO

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ DHT –î–∞—Ç—á–∏–∫–æ–≤
```cpp
struct DhtCacheEntry {
 float temperature = -999.0f;
 float humidity = -999.0f;
 bool tempValid = false;
 bool humValid = false;
 unsigned long readCycleId = 0; // –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –≤ —Ü–∏–∫–ª–µ
};
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫ —Å Backoff
```cpp
// –ü—Ä–∏ –æ—à–∏–±–∫–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞
if (readingFailed) {
 _dhtConsecutiveFailures[pinName]++;
 unsigned long backoff = min(30000UL, 1000UL << failures);
 _dhtBackoffMs[pinName] = backoff;
}
```

---

## –ê–Ω–∞–ª–∏–∑ –ö–∞—á–µ—Å—Ç–≤–∞ –ö–æ–¥–∞

### –°–∏–ª—å–Ω—ã–µ –°—Ç–æ—Ä–æ–Ω—ã
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **Defensive programming**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **Memory efficiency**: –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- **Error handling**: —É–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å backoff
- **–°–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥**: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è –£–ª—É—á—à–µ–Ω–∏—è
- **–ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –Ω–µ—Ç –µ–¥–∏–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã config_save
- **–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ TODO**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PingManager
- **Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: —Ç–æ–ª—å–∫–æ CLI —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –†–µ—Å—É—Ä—Å—ã

### –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ü–∞–º—è—Ç–∏
```
RAM Usage Breakdown:
 Core —Å–∏—Å—Ç–µ–º—ã: ~15KB
 Network stack: ~20KB 
 Application logic: ~8KB
 Buffers & cache: ~5KB
 –û–±—â–∏–π —Ä–µ–∑–µ—Ä–≤: ~48KB
```

### –°–µ—Ç–µ–≤—ã–µ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–ú–∞–∫—Å–∏–º—É–º —É–∑–ª–æ–≤**: 32 (painlessMesh)
- **Ping –º–µ–∂–¥—É —É–∑–ª–∞–º–∏**: 15-50–º—Å
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: ~1Mbps —Å–µ—Ç—å
- **–î–∞–ª—å–Ω–æ—Å—Ç—å**: 50-200–º
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏**: >95%

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

### –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ó–∞—â–∏—Ç–∞
1. **TrustedNodeManager**: –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤
2. **Message validation**: –ø—Ä–æ–≤–µ—Ä–∫–∞ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä 
3. **Cooldown protection**: –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –ø—Ä–∞–≤–∏–ª
4. **Watchdog monitoring**: –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–∏
5. **Graceful degradation**: —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–±–æ—è—Ö

### –°–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ mesh
- –ü–æ–∏—Å–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ —Ñ–ª–µ—à-–ø–∞–º—è—Ç–∏
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ health_check

---

## API –∏ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ù–æ–≤—ã—Ö –¢–∏–ø–æ–≤ –î–∞—Ç—á–∏–∫–æ–≤
```cpp
// 1. –î–æ–±–∞–≤–∏—Ç—å –≤ enum PinType
PIN_TYPE_MY_SENSOR = 9

// 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ PinManager
bool PinManager::_setupMySensor(const PinConfig& config) {
 // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—Ç—á–∏–∫–∞
}

SensorData PinManager::_readMySensorData(const PinConfig& config) {
 // –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
}
```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ CLI
```cpp
// –î–æ–±–∞–≤–∏—Ç—å –≤ CommandExecutor::_registerCommands()
_commands.push_back({
 "my_command", 
 "–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã", 
 "my_command <–ø–∞—Ä–∞–º–µ—Ç—Ä—ã>", 
 "category"
});
```

---

## –í—ã–≤–æ–¥—ã –∏ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –û—Ü–µ–Ω–∫–∞ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: 9/10
**AgriSwarm** –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

 **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω**: 7-—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ 
 **–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è**: SmartMeshManager, pub/sub 
 **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 
 **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –º–æ–¥—É–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω, —á–µ—Ç–∫–∏–µ API 

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –†–∞–∑–≤–∏—Ç–∏—è
1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å config_save/load** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
2. **–ó–∞–≤–µ—Ä—à–∏—Ç—å PingManager** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. **–î–æ–±–∞–≤–∏—Ç—å web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
4. **–†–∞—Å—à–∏—Ä–∏—Ç—å —Ç–∏–ø—ã –¥–∞—Ç—á–∏–∫–æ–≤** (I2C, SPI)

**–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:** –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –æ—Å–Ω–æ–≤–æ–π –¥–ª—è enterprise —Ä–µ—à–µ–Ω–∏–π IoT –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.