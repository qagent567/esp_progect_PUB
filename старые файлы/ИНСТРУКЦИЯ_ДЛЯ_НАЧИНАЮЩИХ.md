# Простые Инструкции для Начинающих

> ** Пошаговое руководство для тех, кто хочет попробовать AgriSwarm** 
> ** ВНИМАНИЕ:** Это для людей с базовыми техническими навыками!

---

## Готовы ли Вы к Этому?

### ВАМ ПОДХОДИТ, если у вас есть:

** Знания:**
- Базовые навыки работы с компьютером (установка программ, работа с файлами)
- Понимание что такое Arduino (хотя бы читали статьи)
- Не боитесь командной строки (терминала)
- Умеете пользоваться мультиметром
- Понимаете что такое GPIO, VCC, GND на схемах

** Время:**
- 2-3 свободных вечера для изучения
- 1-2 дня на первоначальную настройку
- Готовность потратить 10-20 часов на эксперименты

** Бюджет:**
- 5000-10000 рублей на компоненты
- Готовность потратить деньги на эксперимент (может не получиться с первого раза)

** Инструменты:**
- Паяльник и умение им пользоваться
- Мультиметр
- Набор проводов и макетная плата
- Компьютер с Windows/Linux/Mac

### НЕ ПОДХОДИТ, если вы:

- Хотите "включил и работает" без настройки
- Не знакомы с электроникой вообще
- Не готовы тратить время на изучение
- Нужна 100% гарантия работы
- Боитесь что-то сломать

---

## Что Нужно Купить (Список Покупок)

### Обязательный минимум (для начала):

| Компонент | Количество | Примерная цена | Где купить | Примечания |
|-----------|------------|----------------|------------|------------|
| **ESP32 DevKit** | 2-3 шт | 500-700₽/шт | AliExpress, Чип и Дип | Берите с USB-C разъемом |
| **DHT22** (температура+влажность) | 2-3 шт | 200-300₽/шт | AliExpress | DHT22 лучше чем DHT11 |
| **Датчик влажности почвы** | 2-3 шт | 100-150₽/шт | AliExpress | Резистивные или емкостные |
| **Реле модуль 5V** | 2-3 шт | 150-250₽/шт | AliExpress | Одноканальные или двухканальные |
| **Макетная плата** | 2-3 шт | 100-200₽/шт | Любой | Для прототипирования |
| **Соединительные провода** | 1 набор | 200-300₽ | Любой | Разные цвета и длины |
| **Блок питания 5V** | 2-3 шт | 300-500₽/шт | Любой | С током не менее 2А |

** ИТОГО на старт:** ~4000-6000₽

### Дополнительно (когда разберетесь):

| Компонент | Цена | Зачем нужно |
|-----------|------|-------------|
| **LCD дисплей 16x2** | 300-500₽ | Показывать информацию без компьютера |
| **Корпуса пластиковые** | 200-400₽/шт | Защита от влаги |
| **Датчики освещенности** | 150-250₽/шт | Управление освещением |
| **Сервоприводы** | 400-600₽/шт | Открывание форточек, клапанов |
| **Насосы 12V** | 500-800₽/шт | Система полива |

---

## Подготовка Рабочего Места

### Программное обеспечение:

**1. Arduino IDE:**
```
1. Скачать с https://www.arduino.cc/en/software
2. Установить
3. Добавить поддержку ESP32:
 - Файл → Настройки → Дополнительные ссылки для менеджера плат
 - Добавить: https://dl.espressif.com/dl/package_esp32_index.json
 - Инструменты → Плата → Менеджер плат → ESP32 → Установить
```

**2. PlatformIO (альтернатива):**
```
1. Скачать VS Code
2. Установить расширение PlatformIO IDE
3. Создать новый проект с платформой ESP32
```

**3. Git (для скачивания кода):**
```
1. Скачать с https://git-scm.com/
2. Установить с настройками по умолчанию
```

### Рабочее место:

- **Хорошее освещение** (лампа на стол)
- **Антистатический коврик** (или заземление)
- **Увеличительное стекло** (для мелких деталей)
- **Органайзер для компонентов** (коробочки, контейнеры)
- **Паяльная станция** с регулировкой температуры
- **Третья рука** (держатель для плат)

---

## Скачивание и Установка

### 1⃣ Скачать Код AgriSwarm:

```bash
# Откройте терминал (командную строку) и выполните:
git clone [URL репозитория AgriSwarm]
cd agriswarm

# Или скачайте ZIP архив и распакуйте
```

### 2⃣ Открыть в Arduino IDE:

```
1. Запустить Arduino IDE
2. Файл → Открыть → выбрать main.cpp из папки src/
3. Инструменты → Плата → ESP32 Dev Module
4. Инструменты → Порт → выбрать порт с ESP32
```

### 3⃣ Установить Библиотеки:

```
1. Скетч → Подключить библиотеку → Управлять библиотеками
2. Найти и установить:
 - PainlessMesh
 - ArduinoJson
 - DHT sensor library
 - ESP32 Time
 - AsyncTCP
```

---

## Подключение Первого Устройства

### Схема Подключения DHT22:

```
ESP32 GPIO DHT22 Pin Назначение
 3.3V → VCC Питание 3.3V
 GND → GND Земля
 GPIO4 → DATA Сигнальный провод
```

### Схема Подключения Реле:

```
ESP32 GPIO Relay Pin Назначение
 5V → VCC Питание 5V
 GND → GND Земля
 GPIO5 → IN Управляющий сигнал
```

### Проверка Подключения:

1. **Подключить ESP32 к компьютеру через USB**
2. **Запустить Serial Monitor** (Ctrl+Shift+M в Arduino IDE)
3. **Загрузить тестовый скетч:**

```cpp
void setup() {
 Serial.begin(115200);
 Serial.println("Тест подключения ESP32");
}

void loop() {
 Serial.println("ESP32 работает!");
 delay(1000);
}
```

4. **Проверить вывод в Serial Monitor** - должны появляться сообщения каждую секунду

---

## Пошаговая Настройка

### Шаг 1: Базовая Прошивка

```cpp
// Простейший тест для проверки датчика
#include "DHT.h"

#define DHT_PIN 4
#define DHT_TYPE DHT22

DHT dht(DHT_PIN, DHT_TYPE);

void setup() {
 Serial.begin(115200);
 dht.begin();
 Serial.println("Датчик DHT22 запущен");
}

void loop() {
 float temp = dht.readTemperature();
 float humidity = dht.readHumidity();
 
 if (!isnan(temp) && !isnan(humidity)) {
 Serial.printf("Температура: %.1f°C, Влажность: %.1f%%\n", temp, humidity);
 } else {
 Serial.println("Ошибка чтения датчика!");
 }
 
 delay(2000);
}
```

### Шаг 2: Настройка Mesh-Сети

```cpp
// Добавляем mesh функциональность
#include "painlessMesh.h"

#define MESH_PREFIX "AgriSwarm"
#define MESH_PASSWORD "your_password"
#define MESH_PORT 5555

painlessMesh mesh;

void setup() {
 Serial.begin(115200);
 
 mesh.setDebugMsgTypes(ERROR | STARTUP);
 mesh.init(MESH_PREFIX, MESH_PASSWORD, MESH_PORT);
 
 Serial.println("Mesh сеть запущена");
}

void loop() {
 mesh.update();
 
 // Отправляем данные в сеть каждые 30 секунд
 static unsigned long lastSend = 0;
 if (millis() - lastSend > 30000) {
 String msg = "Привет от узла " + String(mesh.getNodeId());
 mesh.sendBroadcast(msg);
 Serial.println("Отправлено: " + msg);
 lastSend = millis();
 }
}
```

### Шаг 3: Полная Интеграция

```cpp
// Загружаем полный код AgriSwarm
// (здесь нужно использовать оригинальный main.cpp)
```

---

## Тестирование

### Проверочный Список:

** Базовые функции:**
- [ ] ESP32 подключается к компьютеру
- [ ] Датчик DHT22 читает температуру и влажность
- [ ] Реле включается и выключается
- [ ] Serial Monitor показывает логи

** Mesh-сеть:**
- [ ] Два ESP32 находят друг друга
- [ ] Сообщения передаются между узлами
- [ ] При отключении одного узла, второй продолжает работать

** Автоматизация:**
- [ ] Правила срабатывают (если влажность < 30%, включить полив)
- [ ] Данные логируются
- [ ] Система восстанавливается после перезагрузки

### Частые Проблемы и Решения:

**Проблема:** ESP32 не подключается к компьютеру
```
Решение:
1. Проверить USB кабель (должен быть data, не только зарядный)
2. Установить драйвера CP2102 или CH340
3. Нажать кнопку BOOT при загрузке кода
```

**Проблема:** Датчик DHT22 возвращает NaN
```
Решение:
1. Проверить подключение проводов
2. Добавить резистор 10кОм между VCC и DATA
3. Увеличить задержку чтения до 2-3 секунд
```

**Проблема:** Mesh-сеть не работает
```
Решение:
1. Проверить что оба ESP32 имеют одинаковые настройки сети
2. Убедиться что они находятся в радиусе действия (5-10 метров)
3. Проверить что mesh.update() вызывается в loop()
```

---

## Полезные Советы

### При Разработке:

- **Начинайте с простого** - сначала один датчик, потом добавляйте функции
- **Делайте бэкапы** - сохраняйте рабочие версии кода
- **Ведите журнал** - записывайте что изменили и какой результат
- **Тестируйте по частям** - не загружайте сразу весь код

### Для Стабильной Работы:

- **Качественное питание** - используйте стабилизированные блоки питания
- **Защита от влаги** - корпуса с IP65 или выше
- **Резервирование** - дублируйте критически важные узлы
- **Мониторинг** - следите за логами и показателями

### Безопасность:

- **Изоляция** - не допускайте контакта 220V с низковольтными цепями
- **Заземление** - подключите заземление для корпусов
- **Защита от КЗ** - используйте предохранители
- **Тестирование** - проверяйте все соединения мультиметром

---

## Куда Обращаться за Помощью

### Онлайн Ресурсы:

- **Arduino Forum** - https://forum.arduino.cc/
- **ESP32 Community** - https://www.esp32.com/
- **PlatformIO Community** - https://community.platformio.org/
- **YouTube каналы** - поиск "ESP32 projects tutorial"

### Полезная Литература:

- "Programming ESP32 with Arduino IDE" - книга для начинающих
- "ESP32 Projects" - сборник практических проектов
- Документация ESP32 - официальная техническая документация

### Сообщества:

- **Telegram**: каналы по Arduino и ESP32
- **Reddit**: r/arduino, r/esp32
- **Facebook**: группы Arduino энтузиастов
- **VK**: сообщества по электронике и IoT

---

## Заключительные Предупреждения

### Помните:

1. **Это альфа-версия** - система может работать нестабильно
2. **Экспериментальный характер** - не используйте для критично важных задач
3. **Потребуются навыки** - готовьтесь к обучению и экспериментам
4. **Финансовые риски** - можете потратить деньги без гарантии результата
5. **Время** - понадобится много времени на изучение и настройку

### Но Если Получится:

- Получите уникальную систему автоматизации
- Изучите современные IoT технологии
- Сэкономите значительные деньги по сравнению с готовыми решениями
- Сможете настроить систему под свои конкретные потребности
- Получите бесценный опыт в области электроники и программирования

---

** Удачи в экспериментах! Помните - в любой сложной системе главное начать с простого и постепенно наращивать функциональность.**

** Последнее обновление:** 20 сентября 2025 
** Статус:** Руководство для технических энтузиастов 
** Версия:** 1.0 - Базовые инструкции